<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemscap - Quant Analytics Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link href="/public/style.css" rel="stylesheet"/>
</head>
<body>
    <div class="container">
        <header>
            <h1>Gemscap Assignment</h1>
            <p class="subtitle">Real-Time Quantitative Analytics Dashboard</p>
            <p><span class="status-indicator"></span>Live Data Stream</p>
        </header>

        <div class="dashboard">
            <!-- Sidebar Controls -->
            <div class="sidebar">
                <div class="card">
                    <h2>Live Data Collection</h2>
                    <div class="form-group">
                        <label>Symbols (comma-separated)</label>
                        <input type="text" id="collectSymbols" placeholder="btcusdt,ethusdt" value="btcusdt,ethusdt">
                    </div>
                    <button id="startCollectorBtn" class="primary">Start Collection</button>
                    <button id="stopCollectorBtn" style="display:none;">Stop Collection</button>
                    <button id="saveDataBtn" class="success small-button" style="display:none;">Save to Server</button>
                    <div id="collectorStatus" style="margin-top: 10px; font-size: 0.9rem;"></div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h2>Upload NDJSON File</h2>
                    <div class="file-upload">
                        <label for="fileInput" class="file-upload-label">
                            Choose NDJSON File
                        </label>
                        <input type="file" id="fileInput" accept=".ndjson,.json">
                    </div>
                    <button id="uploadBtn" class="secondary">Upload Data</button>
                    <div id="uploadStatus" style="margin-top: 10px; font-size: 0.9rem;"></div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h2>Analytics Settings</h2>
                    <div class="form-group">
                        <label>Symbol X</label>
                        <input type="text" id="symbolX" placeholder="BTCUSDT" value="BTCUSDT">
                    </div>
                    <div class="form-group">
                        <label>Symbol Y</label>
                        <input type="text" id="symbolY" placeholder="ETHUSDT" value="ETHUSDT">
                    </div>
                    <div class="form-group">
                        <label>Timeframe</label>
                        <select id="timeframe">
                            <option value="1s">1 Second</option>
                            <option value="1m" selected>1 Minute</option>
                            <option value="5m">5 Minutes</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Rolling Window</label>
                        <input type="number" id="window" value="30" min="10" max="200">
                    </div>
                    <button id="analyzeBtn">Compute Analytics</button>
                    <button id="exportBtn" class="success small-button">Download CSV</button>
                    <button id="adfBtn" class="secondary small-button">Run ADF Test</button>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h2>Alerts</h2>
                    <div class="form-group">
                        <label>Z-Score Threshold</label>
                        <input type="number" id="alertThreshold" value="2" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Operator</label>
                        <select id="alertOperator">
                            <option value="gt">Greater Than (&gt;)</option>
                            <option value="gte">Greater Than or Equal (&ge;)</option>
                            <option value="lt">Less Than (&lt;)</option>
                            <option value="lte">Less Than or Equal (&le;)</option>
                        </select>
                    </div>
                    <button id="createAlertBtn" class="success small-button">Create Alert</button>
                    <div id="alertsList" class="alerts-list" style="margin-top: 15px;"></div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Stats Grid -->
                <div class="card">
                    <h2>Key Statistics</h2>
                    <div class="stats-grid" id="statsGrid">
                        <div class="stat-box">
                            <div class="stat-label">Hedge Ratio</div>
                            <div class="stat-value" id="hedgeRatio">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">RÂ² (Quality)</div>
                            <div class="stat-value" id="r2">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Spread Mean</div>
                            <div class="stat-value" id="spreadMean">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Current Z-Score</div>
                            <div class="stat-value" id="currentZScore">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Data Points</div>
                            <div class="stat-value" id="dataPoints">-</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Correlation</div>
                            <div class="stat-value" id="correlation">-</div>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="card">
                    <h2>Price Comparison</h2>
                    <div id="priceChart" class="chart-container"></div>
                </div>

                <div class="card">
                    <h2>Spread & Z-Score</h2>
                    <div id="spreadChart" class="chart-container"></div>
                </div>

                <div class="card">
                    <h2>Rolling Correlation</h2>
                    <div id="correlationChart" class="chart-container"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="/public/app.js"></script>
</body>
</html>


